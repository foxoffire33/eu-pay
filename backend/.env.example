# EU Pay — Environment Configuration
# All banking operations use PSD2 Open Banking (mandatory for all EU/EEA banks).

###> symfony/framework-bundle ###
APP_ENV=dev
APP_SECRET=change-me-to-a-random-string
APP_DEBUG=1
###< symfony/framework-bundle ###

###> doctrine/doctrine-bundle ###
# PostgreSQL — EU-hosted (Hetzner, OVH, Scaleway, IONOS)
DATABASE_URL="postgresql://eupay:eupay@postgres:5432/eupay?serverVersion=16&charset=utf8"
###< doctrine/doctrine-bundle ###

###> lexik/jwt-authentication-bundle ###
JWT_SECRET_KEY=%kernel.project_dir%/config/jwt/private.pem
JWT_PUBLIC_KEY=%kernel.project_dir%/config/jwt/public.pem
JWT_PASSPHRASE=change-me
JWT_TOKEN_TTL=3600
###< lexik/jwt-authentication-bundle ###

###> PSD2 Open Banking (all EU/EEA banks) ###
# eIDAS QWAC certificate for PSD2 mutual TLS
# Apply at your national competent authority (e.g., BaFin DE, DNB NL, ACPR FR)
PSD2_CLIENT_ID=your-psd2-client-id
PSD2_CLIENT_SECRET=your-psd2-client-secret
PSD2_CERT_PATH=/app/config/psd2/qwac.pem
PSD2_KEY_PATH=/app/config/psd2/qwac-key.pem
PSD2_API_BASE_URL=https://api-sandbox.rabobank.nl
PSD2_WEBHOOK_SECRET=your-webhook-hmac-secret
APP_CALLBACK_URL=https://api.eupay.eu
###< PSD2 Open Banking ###

###> Card Issuing — 7 EU-licensed providers (change alias in services.yaml) ###
#
# ┌──────────────────┬───────────┬──────────────┬───────────────────────────┐
# │ Provider         │ Scheme    │ License      │ Coverage                  │
# ├──────────────────┼───────────┼──────────────┼───────────────────────────┤
# │ Marqeta          │ Visa      │ CBI Ireland  │ 40+ countries             │
# │ Adyen Issuing    │ Visa+MC   │ DNB Neth.    │ 30+ EU/EEA               │
# │ Stripe Issuing   │ Visa      │ CBI Ireland  │ 20 EU countries           │
# │ Enfuce           │ Visa+MC   │ FIN-FSA      │ 30 EEA + UK              │
# │ Wallester        │ Visa      │ Estonian FSA │ 30 EEA + UK              │
# │ Paynetics        │ Visa+MC   │ BNB Bulgaria │ All EEA                  │
# │ Nexi Group       │ Visa+MC   │ Banca d'It.  │ EU-wide                  │
# └──────────────────┴───────────┴──────────────┴───────────────────────────┘

# --- Marqeta (default) ---
CARD_ISSUER_API_URL=https://sandbox-api.marqeta.com
CARD_ISSUER_APP_TOKEN=your-application-token
CARD_ISSUER_ADMIN_TOKEN=your-admin-access-token
CARD_ISSUER_PRODUCT_TOKEN=your-card-product-token
CARD_ISSUER_FUNDING_TOKEN=your-funding-source-token

# --- Adyen Issuing ---
ADYEN_ISSUING_API_URL=https://balanceplatform-api-test.adyen.com/bcl/v2
ADYEN_ISSUING_API_KEY=your-adyen-api-key
ADYEN_BALANCE_ACCOUNT_ID=your-balance-account
ADYEN_BALANCE_PLATFORM=your-balance-platform

# --- Stripe Issuing ---
STRIPE_ISSUING_SECRET_KEY=sk_test_your-stripe-key

# --- Enfuce ---
ENFUCE_API_URL=https://api-sandbox.enfuce.com/v1
ENFUCE_API_KEY=your-enfuce-api-key
ENFUCE_API_SECRET=your-enfuce-api-secret
ENFUCE_PROGRAM_ID=your-program-id

# --- Wallester ---
WALLESTER_API_URL=https://api-sandbox.wallester.com/v1
WALLESTER_API_KEY=your-wallester-api-key
WALLESTER_API_SECRET=your-wallester-api-secret
WALLESTER_PRODUCT_ID=your-product-id

# --- Paynetics ---
PAYNETICS_API_URL=https://api-sandbox.paynetics.digital/v1
PAYNETICS_API_KEY=your-paynetics-api-key
PAYNETICS_CLIENT_ID=your-client-id
PAYNETICS_PROGRAMME_ID=your-programme-id

# --- Nexi Group ---
NEXI_ISSUING_API_URL=https://api-sandbox.nexigroup.com/issuing/v1
NEXI_ISSUING_API_KEY=your-nexi-api-key
NEXI_MERCHANT_ID=your-merchant-id
NEXI_PROGRAMME_TOKEN=your-programme-token
###< Card Issuing ###

###> EU Pay Creditor Account (for top-ups) ###
EUPAY_CREDITOR_IBAN=DE00000000000000000000
EUPAY_CREDITOR_NAME="EU Pay GmbH"
###< EU Pay Creditor Account ###

###> Zero-Knowledge Encryption ###
BLIND_INDEX_KEY=change-me-64-hex-chars
CARD_ENCRYPTION_KEY=change-me-64-hex-chars
###< Zero-Knowledge Encryption ###

###> GDPR Configuration ###
DATA_RETENTION_YEARS=5
PRIVACY_POLICY_VERSION=1.0.0
###< GDPR Configuration ###

###> HCE / NFC Configuration ###
HCE_SESSION_KEY_TTL=300
###< HCE / NFC Configuration ###

###> nelmio/cors-bundle ###
CORS_ALLOW_ORIGIN='^https?://(eupay\.localhost|localhost)(:[0-9]+)?$'
###< nelmio/cors-bundle ###
